{% load static %}
<style>
    .rd-nav {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-wrap: wrap;
    }

    .rd-nav-item {
        position: relative;
        display: inline-block;
    }

    .rd-nav-link {
        display: block;
        padding: 10px;
        text-decoration: none;
        color: #000;
        transition: color 0.3s ease;
    }

    .rd-nav-link:hover {
        color: #007bff;
    }

    .dropdown {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: #fff;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        list-style: none;
        padding: 0;
        margin: 0;
        width: 185px;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
        z-index: 1000;
    }

    .dropdown li {
        padding: 10px;
        opacity: 0;
        transform: translateX(-10px);
        transition: opacity 0.3s ease, transform 0.3s ease, color 0.3s ease;
    }

    .dropdown li a {
        text-decoration: none;
        color: #000;
        display: block;
        transition: color 0.3s ease;
    }

    .dropdown li a:hover {
        color: #007bff;
    }

    .rd-nav-item:hover .dropdown,
    .rd-nav-item:focus-within .dropdown {
        display: block;
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .rd-nav-item:hover .dropdown li,
    .rd-nav-item:focus-within .dropdown li {
        opacity: 1;
        transform: translateX(0);
    }

    .dropdown li:nth-child(1) {
        transition-delay: 0.1s;
    }

    .dropdown li:nth-child(2) {
        transition-delay: 0.2s;
    }

    .dropdown li:nth-child(3) {
        transition-delay: 0.3s;
    }

    .dropdown li:nth-child(4) {
        transition-delay: 0.4s;
    }

    .dropdown-auth {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: #31404a;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        list-style: none;
        padding: 0;
        margin: 0;
        width: 160px;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
        z-index: 1000;
    }

    .dropdown-auth li {
        padding: 10px;
        opacity: 0;
        transform: translateX(-10px);
        transition: opacity 0.3s ease, transform 0.3s ease, color 0.3s ease;
    }

    .dropdown-auth li a {
        text-decoration: none;
        color: #fff;
        display: block;
        transition: color 0.3s ease;
    }

    .dropdown-auth li a:hover {
        color: #007bff;
    }

    .rd-nav-item:hover .dropdown-auth,
    .rd-nav-item:focus-within .dropdown-auth {
        display: block;
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .rd-nav-item:hover .dropdown-auth li,
    .rd-nav-item:focus-within .dropdown-auth li {
        opacity: 1;
        transform: translateX(0);
    }

    .dropdown-auth li:nth-child(1) {
        transition-delay: 0.1s;
    }

    .dropdown-auth li:nth-child(2) {
        transition-delay: 0.2s;
    }

    .dropdown-auth li:nth-child(3) {
        transition-delay: 0.3s;
    }

    .dropdown-auth li:nth-child(4) {
        transition-delay: 0.4s;
    }

    @media (max-width: 768px) {
        .rd-navbar-nav {
            flex-direction: column;
        }

        .rd-nav-item {
            width: 100%;
        }

        .dropdown,
        .dropdown-auth {
            position: relative;
            top: auto;
            left: auto;
            box-shadow: none;
            opacity: 1;
            visibility: visible;
            transform: none;
        }

        .rd-nav-item:hover .dropdown,
        .rd-nav-item:focus-within .dropdown,
        .rd-nav-item:hover .dropdown-auth,
        .rd-nav-item:focus-within .dropdown-auth {
            display: block;
        }
    }

    .rd-nav-link {
        position: relative;
        display: inline-block;
    }

    .notification-badge {
        background-color: red;
        color: white;
        border-radius: 50%;
        padding: 6px 8px;
        font-size: 9px;
        top: -2px;
        right: -8px;
        position: absolute;
        transform: translate(50%, -50%);
        display: inline-block;
        line-height: 1;
        min-width: 20px;
        text-align: center;
        vertical-align: middle;
    }
</style>

<header class="section page-header rd-navbar-transparent-wrap">
    <div class="rd-navbar-wrap">
        <nav class="rd-navbar rd-navbar-transparent" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed"
             data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed"
             data-lg-layout="rd-navbar-static" data-lg-device-layout="rd-navbar-static"
             data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static"
             data-lg-stick-up-offset="20px" data-xl-stick-up-offset="20px" data-xxl-stick-up-offset="20px"
             data-lg-stick-up="true" data-xl-stick-up="true" data-xxl-stick-up="true">
            <div class="rd-navbar-collapse-toggle rd-navbar-fixed-element-1"
                 data-rd-navbar-toggle=".rd-navbar-collapse"><span></span></div>
            <div class="rd-navbar-aside-outer rd-navbar-collapse">
                <div class="rd-navbar-aside">
                    <div class="rd-navbar-info">
                        <ul class="list-lined">
                            <li>
                                <a href="https://discord.gg/ddnRXcQJCV" target="_blank">
                                    <img src="{% static 'images/discord.svg' %}" alt="Discord Icon" width="16px"
                                         height="16px" style="margin-right: 2px;">
                                    Discord
                                </a>
                            </li>
                            <li>
                                <a href="https://vk.com/saintlouis_sfpd" target="_blank">
                                    <i class="fa fa-vk" aria-hidden="true" style="margin-right: 2px;"></i> Группа
                                </a>
                            </li>
                            <li>
                                <a href="https://evolve-rp.su/index.php?forums/46/" target="_blank">
                                    <i class="fa fa-newspaper-o" aria-hidden="true" style="margin-right: 2px;"></i>
                                    Форум
                                </a>
                            </li>
                            <li>
                                <a href="https://docs.google.com/spreadsheets/d/10suCWj2o6Cy9J5tp-I9jMW9HinTgFq1T1yPlsAjJGPE/edit?gid=1836015645#gid=1836015645"
                                   target="_blank">
                                    <i class="fa fa-table" aria-hidden="true" style="margin-right: 2px;"></i>
                                    Таблица
                                </a>
                            </li>
                            <li>
                                <a href="https://evolve-rp.ru" target="_blank">
                                    <img src="{% static 'images/evolve.webp' %}" alt="Discord Icon" width="15px"
                                         height="15px" style="margin-right: 2px;">
                                    Evolve RP
                                </a>
                            </li>
                        </ul>
                    </div>
                    <ul class="list-lined">
                        {% if user.is_authenticated %}
                            <li class="rd-nav-item">
                                <a href="#" class="rd-nav-link"><i class="fa fa-user-circle"
                                                                   aria-hidden="true"></i> {{ user.username }}</a>
                                <ul class="dropdown-auth">
                                    <li><a href="{% url 'profile_detail' slug=user.profile.slug %}"><i
                                            class="fa fa-share-square-o" aria-hidden="true"></i> Личный кабинет</a>
                                    </li>
                                    <li><a href="{% url 'user_logout' %}"><i class="fa fa-sign-out"
                                                                             aria-hidden="true"></i> Выход</a></li>
                                </ul>
                            </li>
                        {% else %}
                            <li><a href="{% url 'user_login' %}" class="rd-nav-link"><i class="fa fa-sign-out"
                                                                                        aria-hidden="true"
                                                                                        style="margin-right: 2px;"></i>
                                Вход</a></li>
                            <li><a href="{% url 'register' %}" class="rd-nav-link"><i class="fa fa-user-plus"
                                                                                      aria-hidden="true"
                                                                                      style="margin-right: 2px;"></i>
                                Регистрация</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            <div class="rd-navbar-main-outer">
                <div class="rd-navbar-main-inner">
                    <div class="rd-navbar-main">
                        <div class="rd-navbar-panel">
                            <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap">
                                <span></span></button>
                            <div class="rd-navbar-brand">
                                <a class="brand" href="{% url 'departments:home' %}">
                                    <img class="brand-logo-dark" src="{% static 'images/logo.png' %}" alt="" width="146"
                                         height="22"/>
                                    <img class="brand-logo-light" src="{% static 'images/logo.png' %}" alt=""
                                         width="200" height="220"/>
                                </a>
                            </div>
                        </div>
                        <div class="rd-navbar-main-element">
                            <div class="rd-navbar-nav-wrap">
                                <ul class="rd-navbar-nav">
                                    <li class="rd-nav-item {% if request.path == '/' %}active{% endif %}">
                                        <a class="rd-nav-link" href="{% url 'departments:home' %}"><i
                                                class="fas fa-home" style="margin-right: 2px;"></i> Главная</a>
                                    </li>
                                    <li class="rd-nav-item {% if request.path == '/news/' %}active{% endif %}">
                                        <a class="rd-nav-link" href="{% url 'news_list' %}"><i class="fas fa-newspaper"
                                                                                               style="margin-right: 2px;"></i>
                                            Новости
                                            <sup>
                                                {% if new_news_count > 0 %}
                                                    <span class="notification-badge">{{ new_news_count }}</span>
                                                {% endif %}
                                            </sup>
                                        </a>
                                    </li>
                                    <li class="rd-nav-item {% if request.path == '/about/' %}active{% endif %}">
                                        <a class="rd-nav-link" href="{% url 'departments:about' %}"><i
                                                class="fas fa-book" style="margin-right: 2px;"></i> О нас</a>
                                    </li>
                                    <li class="rd-nav-item {% if request.path == '/police_academy/' or request.path == '/cpd/' or request.path == '/swat/' or request.path == '/db/' %}active{% endif %}">
                                        <a class="rd-nav-link" href="#"><i class="fas fa-building"
                                                                           style="margin-right: 2px;"></i> Отделы</a>
                                        <ul class="dropdown">
                                            <li><a href="{% url 'departments:pa_detail' %}"><i
                                                    class="fas fa-graduation-cap"></i> Police Academy</a></li>
                                            <li><a href="{% url 'departments:cpd_detail' %}"><i
                                                    class="fas fa-car"></i> Central Patrol Division</a>
                                            </li>
                                            <li><a href="{% url 'departments:db_detail' %}"><i
                                                    class="fas fa-user-secret"></i> Detective Bureau</a></li>
                                            <li><a href="{% url 'departments:swat_detail' %}"><i
                                                    class="fas fa-hand-peace-o"></i> SWAT</a></li>
                                        </ul>
                                    </li>
                                    <li class="rd-nav-item {% if request.path == '/faq/' %}active{% endif %}">
                                        <a class="rd-nav-link" href="{% url 'departments:faq' %}"><i
                                                class="fas fa-question-circle" style="margin-right: 2px;"></i> FAQ</a>
                                    </li>

                                    <li class="rd-nav-item {% if request.path == '/profiles/profiles_list/' %}active{% endif %}">
                                        <a class="rd-nav-link" href="#"><i class="fas fa-bars"
                                                                           style="margin-right: 2px;"></i> Разное<sup>
                                            {% if new_changes_count > 0 %}
                                                <span class="notification-badge">{{ new_changes_count }}</span>
                                            {% endif %}</sup></a>
                                        <ul class="dropdown">
                                            {#                                            <li><a href="{% url 'departments:hall_of_fame' %}">Доска почета</a></li>#}
{#                                            <li><a href="{% url 'departments:thank_board' %}"><i#}
{#                                                    class="fas fa-desktop"></i> Благодарственная доска</a>#}
{#                                            </li>#}
                                            <li><a href="{% url 'profile_list' %}"><i
                                                    class="fas fa-users"></i> Список пользователей</a></li>
                                            <li><a href="{% url 'departments:change_history_list' %}"><i
                                                    class="fas fa-history"></i> История
                                                изменений <sup>{% if new_changes_count > 0 %}
                                                    <span class="notification-badge">{{ new_changes_count }}</span>
                                                {% endif %}</sup></a></li>
                                            {% if user.is_superuser %}
                                                <li><a href="{% url 'admin:index' %}"><i
                                                        class="fas fa-cogs"></i> Админ панель</a>
                                                </li>
                                            {% endif %}
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</header>
